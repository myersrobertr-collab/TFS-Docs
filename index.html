<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="theme-color" content="#121826">
  <link rel="manifest" href="app.webmanifest">
  <title>TFS Documents</title>

  <style>
    :root {
      --bg: #0f1420;
      --panel: #121826;
      --text: #e7ebf3;
      --muted: #a9b1c3;
      --brand: #2eaadc;
      --danger: #e5484d;

      --chip-bg: #1a2333;
      --chip-border: #2a3650;
      --chip-glow: 0 0 0 6px rgba(46,170,220,.12), 0 0 18px rgba(46,170,220,.15);
      --chip-glow-faint: 0 0 0 4px rgba(46,170,220,.08);

      --radius: 14px;
    }

    html, body {
      height: 100%;
      background: radial-gradient(1200px 800px at 20% -10%, #192133 0%, #0f1420 60%) fixed,
                  linear-gradient(#0f1420, #0f1420);
      color: var(--text);
      font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, "Helvetica Neue", Arial, "Apple Color Emoji", "Segoe UI Emoji";
      -webkit-font-smoothing: antialiased;
      -moz-osx-font-smoothing: grayscale;
      margin: 0;
    }

    .app {
      max-width: 1100px;
      margin: 36px auto 72px;
      padding: 0 16px;
    }

    header {
      display: flex;
      gap: 12px;
      align-items: center;
      justify-content: space-between;
      margin-bottom: 16px;
    }

    .title { font-size: 22px; letter-spacing: .2px; font-weight: 650; }
    .subtle { color: var(--muted); font-size: 13px; }

    .toolbar { display: flex; gap: 8px; align-items: center; flex-wrap: wrap; }

    button.btn {
      background: var(--panel); color: var(--text);
      border: 1px solid #263247; border-radius: 12px;
      padding: 10px 14px; font-weight: 600; font-size: 14px;
      cursor: pointer; transition: transform .06s ease, border-color .2s ease, box-shadow .2s ease;
    }
    button.btn:hover { transform: translateY(-1px); border-color: #2f3d57; }
    button.btn:active { transform: translateY(0); }

    /* -------- Chips -------- */
    .chip-row {
      display: flex;
      gap: 8px;
      flex-wrap: wrap;
      margin: 14px 0 22px;
    }
    .chip {
      display: inline-flex;
      align-items: center;
      gap: 8px;
      padding: 8px 12px;
      border-radius: 999px;
      background: var(--chip-bg);
      border: 1px solid var(--chip-border);
      color: var(--text);
      font-size: 13px;
      font-weight: 600;
      letter-spacing: .2px;
      cursor: pointer;
      user-select: none;
      transition: box-shadow .2s ease, border-color .2s ease, transform .06s ease, background .2s ease;
      box-shadow: none;
      outline: none;
    }
    .chip:hover { border-color: #3a4a6b; transform: translateY(-1px); }
    .chip:active { transform: translateY(0); }

    /* Selected tag chip = soft glow */
    .chip--active {
      border-color: #45b8e6;
      box-shadow: var(--chip-glow);
      background: linear-gradient(180deg, #1c2a40, #172237 60%, #152032);
    }

    /* EMER styling */
    .chip--emer {
      border-color: rgba(229,72,77,.65);
      background: linear-gradient(180deg, #2a1416, #201013 60%, #1a0e12);
      color: #ffd6d7;
    }
    .chip--emer.chip--active {
      box-shadow: 0 0 0 6px rgba(229,72,77,.14), 0 0 18px rgba(229,72,77,.18);
      border-color: #ff6a70;
    }

    /* Count chip (e.g., G600 (9)) = outlined + faint glow */
    .chip--count {
      background: transparent;
      border-style: dashed;
      border-color: #3a4a6b;
      box-shadow: var(--chip-glow-faint);
      opacity: .95;
    }

    /* -------- Sections -------- */
    .section {
      border: 1px solid #223149;
      border-radius: var(--radius);
      background: rgba(18,24,38,.6);
      box-shadow: 0 8px 26px rgba(0,0,0,.28);
      margin-bottom: 16px;
      overflow: hidden;
    }
    .section-head {
      display: flex;
      align-items: center;
      justify-content: space-between;
      gap: 12px;
      padding: 14px 16px;
      border-bottom: 1px solid #1f2a42;
      background: linear-gradient(180deg, rgba(20,28,44,.6), rgba(14,20,33,.4));
    }
    /* .section-title removed to avoid empty ruleset */
    .section-body { padding: 8px 10px 10px; }

    .doc-grid {
      display: grid;
      grid-template-columns: repeat(1, minmax(0, 1fr));
      gap: 8px;
    }
    @media (min-width: 720px) { .doc-grid { grid-template-columns: repeat(2, minmax(0, 1fr)); } }
    @media (min-width: 980px) { .doc-grid { grid-template-columns: repeat(3, minmax(0, 1fr)); } }

    .doc-card {
      border: 1px solid #223149;
      background: #121826;
      border-radius: 12px;
      padding: 10px 12px;
      display: grid;
      gap: 6px;
      transition: transform .06s ease, border-color .2s ease, box-shadow .2s ease;
    }
    .doc-card:hover { transform: translateY(-1px); border-color: #2a3a58; box-shadow: 0 8px 22px rgba(0,0,0,.25); }

    /* The doc "button" */
    .link {
      display: inline-flex;
      align-items: center;
      gap: 8px;
      padding: 10px 12px;
      background: #162035;
      border: 1px solid #263247;
      border-radius: 10px;
      text-decoration: none;
      color: var(--text);
      font-weight: 700;
      font-size: 14px;
      transition: border-color .2s ease, transform .06s ease;
    }
    .link:hover { border-color: #35507a; transform: translateY(-1px); }
    .danger { background: #2a1213; border-color: #482224; color: #ffd6d7; }

    /* Progress bar */
    .progress-wrap { display: none; align-items: center; gap: 10px; margin: 8px 0 2px; }
    .progress {
      height: 8px; width: 240px; border-radius: 999px;
      background: #0e1728; border: 1px solid #25324b; overflow: hidden;
    }
    .progress > i { display: block; height: 100%; width: 0%; background: linear-gradient(90deg, #46b5e1, #2eaadc); transition: width .15s ease; }

    .badge {
      display: inline-flex; align-items: center; gap: 6px;
      padding: 6px 10px; border-radius: 999px; font-size: 12px; font-weight: 700;
      border: 1px solid #263247; background: #121826; color: var(--muted);
    }
    .badge--warn { color: #ffd9a8; border-color: #5a3d1a; background: #2a1d0f; }
  </style>
</head>
<body>
  <div class="app">
    <header>
      <div>
        <div class="title">TFS Documents</div>
        <div class="subtle" id="meta"></div>
      </div>
      <div class="toolbar">
        <button class="btn" id="btnDownload">Download Docs</button>
        <button class="btn danger" id="btnRemove">Remove Docs</button>
      </div>
    </header>

    <!-- Progress bar -->
    <div class="progress-wrap" id="progressWrap" aria-hidden="true">
      <div class="progress"><i id="progressBar" style="width:0%"></i></div>
      <span class="badge" id="progressLabel">0%</span>
    </div>

    <!-- Tag filter chips -->
    <div class="chip-row" id="tagChips" aria-label="Document tag filters"></div>

    <!-- Sections mount -->
    <div id="sections"></div>
  </div>

  <script>
    /* Configure paths/versions here */
    window.APP_VERSION  = window.APP_VERSION  || "2025.A";
    window.MANIFEST_URL = window.MANIFEST_URL || "docs/manifest.json"; /* docs manifest lives under /docs */
    window.CACHE_NAME   = window.CACHE_NAME   || ("tfs-docs-" + window.APP_VERSION);
  </script>
  <script src="app.js" defer></script>
  <script>
    if ('serviceWorker' in navigator) {
      window.addEventListener('load', function () {
        navigator.serviceWorker.register('sw.js').catch(function () {});
      });
    }
  </script>
</body>
</html>
